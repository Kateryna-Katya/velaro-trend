{"version":3,"file":"index.js","sources":["../src/main.js"],"sourcesContent":["/**\n * Velaro-Trend.blog - Core Scripts (2025)\n * Чистый JavaScript без использования модулей.\n */\n\ndocument.addEventListener('DOMContentLoaded', () => {\n\n  // --- 1. ПЛАВНЫЙ СКРОЛЛ (LENIS) ---\n  // Проверяем, загружена ли библиотека из CDN\n  let lenis;\n  if (typeof Lenis !== 'undefined') {\n      lenis = new Lenis({\n          duration: 1.2,\n          easing: (t) => Math.min(1, 1.001 - Math.pow(2, -10 * t)),\n          orientation: 'vertical',\n          gestureOrientation: 'vertical',\n          smoothWheel: true,\n      });\n\n      function raf(time) {\n          lenis.raf(time);\n          requestAnimationFrame(raf);\n      }\n      requestAnimationFrame(raf);\n  }\n\n  // --- 2. МОБИЛЬНОЕ МЕНЮ (BURGER) ---\n  const burger = document.getElementById('burger-btn');\n  const mobileMenu = document.getElementById('mobile-menu');\n  const menuLinks = document.querySelectorAll('.mobile-menu__list a');\n\n  if (burger && mobileMenu) {\n      burger.addEventListener('click', () => {\n          mobileMenu.classList.toggle('active');\n          // Анимация самого бургера (если добавлена в CSS)\n          burger.classList.toggle('open');\n      });\n\n      // Закрываем меню при клике на любую ссылку\n      menuLinks.forEach(link => {\n          link.addEventListener('click', () => {\n              mobileMenu.classList.remove('active');\n              burger.classList.remove('open');\n          });\n      });\n  }\n\n  // --- 3. ХЕДЕР ПРИ СКРОЛЛЕ (ЭФФЕКТ СТЕКЛА) ---\n  const header = document.querySelector('.header');\n  const handleScroll = () => {\n      if (window.scrollY > 50) {\n          header.classList.add('header--scrolled');\n      } else {\n          header.classList.remove('header--scrolled');\n      }\n  };\n  window.addEventListener('scroll', handleScroll);\n\n  // --- 4. ФОРМА КОНТАКТОВ И КАПЧА ---\n  const form = document.getElementById('ajax-form');\n  const capText = document.getElementById('cap-text');\n  const capAns = document.getElementById('cap-ans');\n  const formStatus = document.getElementById('form-status');\n  const phoneInput = document.getElementById('phone');\n\n  // Генерация капчи\n  let result = 0;\n  if (capText) {\n      const n1 = Math.floor(Math.random() * 10) + 2;\n      const n2 = Math.floor(Math.random() * 5) + 1;\n      result = n1 + n2;\n      capText.innerText = `Подтвердите: ${n1} + ${n2} =`;\n  }\n\n  // Валидация телефона (только цифры и +)\n  if (phoneInput) {\n      phoneInput.addEventListener('input', (e) => {\n          e.target.value = e.target.value.replace(/[^0-9+]/g, '');\n      });\n  }\n\n  // Обработка отправки формы\n  if (form) {\n      form.addEventListener('submit', (e) => {\n          e.preventDefault();\n\n          // Проверка капчи\n          if (parseInt(capAns.value) !== result) {\n              alert('Неверный ответ капчи! Попробуйте еще раз.');\n              return;\n          }\n\n          // Визуализация отправки\n          formStatus.style.display = 'block';\n          formStatus.style.background = 'rgba(255, 255, 255, 0.1)';\n          formStatus.style.color = '#fff';\n          formStatus.innerText = 'ОТПРАВКА ДАННЫХ...';\n\n          // Имитация AJAX (задержка 1.5 сек)\n          setTimeout(() => {\n              form.reset();\n              formStatus.style.background = 'var(--color-accent)';\n              formStatus.style.color = 'var(--color-bg)';\n              formStatus.innerText = 'УСПЕХ! МЫ СВЯЖЕМСЯ С ВАМИ В БЛИЖАЙШЕЕ ВРЕМЯ.';\n\n              // Скрываем сообщение через 5 секунд\n              setTimeout(() => {\n                  formStatus.style.display = 'none';\n              }, 5000);\n\n              // Обновляем капчу для следующего раза\n              const n1 = Math.floor(Math.random() * 10) + 2;\n              const n2 = Math.floor(Math.random() * 5) + 1;\n              result = n1 + n2;\n              capText.innerText = `Подтвердите: ${n1} + ${n2} =`;\n          }, 1500);\n      });\n  }\n\n  // --- 5. COOKIE POPUP ---\n  const cookieBar = document.getElementById('cookie-bar');\n  const cookieBtn = document.getElementById('cookie-btn');\n\n  if (cookieBar && !localStorage.getItem('velaro_cookies_2025')) {\n      // Показываем плашку через 3 секунды после входа\n      setTimeout(() => {\n          cookieBar.style.display = 'flex';\n      }, 3000);\n\n      cookieBtn.addEventListener('click', () => {\n          localStorage.setItem('velaro_cookies_2025', 'true');\n          cookieBar.style.display = 'none';\n      });\n  }\n\n  // --- 6. GSAP АНИМАЦИИ (SCROLLTRIGGER) ---\n  // Проверяем наличие GSAP перед использованием\n  if (typeof gsap !== 'undefined') {\n      gsap.registerPlugin(ScrollTrigger);\n\n      // Анимация Hero при загрузке\n      gsap.from(\".hero__title\", {\n          duration: 1.5,\n          y: 80,\n          opacity: 0,\n          ease: \"power4.out\",\n          delay: 0.3\n      });\n\n      gsap.from(\".hero__lead\", {\n          duration: 1.2,\n          y: 30,\n          opacity: 0,\n          ease: \"power3.out\",\n          delay: 0.8\n      });\n\n      // Анимация появления секций\n      const fadeSections = document.querySelectorAll('.section');\n      fadeSections.forEach(section => {\n          gsap.from(section, {\n              scrollTrigger: {\n                  trigger: section,\n                  start: \"top 85%\", // Анимация начнется, когда секция будет на 85% экрана\n              },\n              y: 40,\n              opacity: 0,\n              duration: 1,\n              ease: \"power2.out\"\n          });\n      });\n\n      // Анимация карточек кейсов\n      const cases = document.querySelectorAll('.case-item');\n      if (cases.length > 0) {\n          gsap.from(cases, {\n              scrollTrigger: {\n                  trigger: \".cases-grid\",\n                  start: \"top 80%\",\n              },\n              scale: 0.9,\n              opacity: 0,\n              duration: 0.8,\n              stagger: 0.2, // Появление по очереди\n              ease: \"back.out(1.7)\"\n          });\n      }\n  }\n});"],"names":["lenis","raf","time","t","burger","mobileMenu","menuLinks","link","header","handleScroll","form","capText","capAns","formStatus","phoneInput","result","n1","n2","e","cookieBar","cookieBtn","section","cases"],"mappings":"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"}